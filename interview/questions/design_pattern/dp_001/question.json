{
  "id": "dp_001",
  "question": "状态机/状态模式是什么？项目里怎么用的？",
  "tags": [
    "状态机",
    "状态模式",
    "表驱动"
  ],
  "difficulty": 2,
  "hint": "状态+事件→行为+下一状态,表驱动代替if/switch",
  "answer": "**状态机**(FSM)将系统行为建模为有限个状态和状态间的转换。核心三要素：当前状态、触发事件、转换动作+下一状态。实现方式有if/switch、**状态模式**(GoF)、表驱动三种。if/switch简单但状态多时代码膨胀且难维护；状态模式每个状态一个类,通过多态分派行为,符合开闭原则但类数量多；表驱动用二维表(状态×事件→动作+下一状态)管理转换,新增状态只需加表项,最简洁可维护。我在T95项目中用表驱动状态机管理设备连接生命周期(Idle→Connecting→Connected→Error→Reconnecting),后来新增固件升级模式(Upgrading),仅增加一行表项和升级处理函数,零改动已有逻辑。状态机在协议解析、UI流程控制、设备管理中都是核心模式。",
  "source": "设计模式面试回答模板.md"
}