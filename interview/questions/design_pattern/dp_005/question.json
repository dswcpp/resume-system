{
  "id": "dp_005",
  "question": "什么是单例模式？如何实现线程安全的单例？",
  "tags": [
    "单例模式",
    "线程安全",
    "C++11"
  ],
  "difficulty": 2,
  "hint": "函数内静态局部变量,C++11天然线程安全",
  "answer": "**单例模式**确保一个类只有一个实例，并提供全局访问点。典型应用：配置管理器、日志系统、数据库连接池等全局唯一资源。C++11之前**线程安全**实现需要双重检查锁(DCLP)或call_once，容易写错。C++11标准规定函数内静态局部变量的初始化是线程安全的(magic static)，编译器保证只初始化一次且并发安全。推荐写法：getInstance()返回static局部变量的引用，构造函数/拷贝/赋值全部private/delete。饿汉式(程序启动即创建)简单但可能浪费资源，懒汉式(首次调用时创建)用magic static实现。我在T95项目中用单例实现ConfigManager(全局配置)和Logger(日志器)，确保全局唯一且线程安全。使用时注意析构顺序问题和可测试性——必要时可通过**依赖注入**替代硬编码单例调用。",
  "source": "设计模式面试回答模板.md"
}