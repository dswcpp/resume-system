{
  "id": "dp_007",
  "question": "事件驱动架构的优缺点？和多线程模型怎么取舍？",
  "tags": [
    "事件驱动",
    "架构对比",
    "资源受限"
  ],
  "difficulty": 2,
  "hint": "营业厅项目在ARM平台为什么选了事件驱动而不是多线程？",
  "answer": "**事件驱动 vs 多线程：**\n\n| 维度 | 事件驱动 | 多线程 |\n|------|---------|-------|\n| 并发方式 | 单线程+事件循环 | 多线程并行 |\n| 内存开销 | 低（无线程栈） | 高（每线程约1MB栈） |\n| CPU利用 | 适合I/O密集 | 适合CPU密集 |\n| 复杂度 | 回调嵌套（回调地狱） | 锁竞争、**死锁**风险 |\n| 调试 | 相对简单 | 竞态条件难调试 |\n\n**选择依据：**\n- **资源受限平台（如ARM嵌入式）**→ 事件驱动：内存少，线程开销大\n- **I/O密集型（如设备通信服务器）**→ 事件驱动：epoll/**select**复用\n- **CPU密集型（如数据处理）**→ 多线程：利用多核\n- **混合场景** → 事件驱动主循环 + 工作**线程池**\n\n**营业厅项目实践：**\nARM平台内存有限，HTTP服务器采用**事件驱动**模型（**epoll** + 非阻塞I/O），替代原来的每连接一线程模型，内存占用大幅降低，同时支持100+并发连接。\n\nSocket连接池复用连接对象，避免频繁创建销毁的开销。",
  "source": "简历：事件驱动替代多线程、ARM平台资源受限、100+并发连接"
}