# 带电检测终端T95项目的整体架构是什么？你负责哪些？

## 知识点速览

项目概述类问题用 **STAR 法则**组织回答：用 30 秒给出项目概貌（产品形态、团队规模、用户量），然后 1 分钟讲清自己的职责和核心成果，最后用数据收尾。重点不在于讲全，而在于让面试官对你的能力形成清晰判断。

## 我的实战经历

**公司/项目：** 南京华乘电气 · T95 带电检测手持终端（2023.04 至今）

**项目背景（Situation）：**
T95 是一款面向电力行业的多功能带电检测手持终端，12 人研发团队，目前有 500+ 现场用户。产品核心价值是让电力运维人员在不停电的情况下，用一台手持设备完成多种检测任务。

集成四种检测技术：
- **红外测温**：热成像摄像头，25fps 实时温度图
- **UHF 超高频局放**：1MHz 采样率脉冲采集，PRPS 图谱
- **TEV 暂态地电压**：1000Hz 采样，波形实时显示
- **AE 超声波**：声发射检测，频谱分析

**整体架构：**

五层架构设计：
1. **设备驱动层**：各检测模块 SDK 对接（红外 SDK、UHF 采集板驱动、TEV/AE 串口通信）
2. **数据采集层**：多线程并行采集，每个模块独立采集线程，SPSC 无锁队列缓冲
3. **数据处理层**：流水线架构（采集→预处理→分析→显示），零拷贝设计，总吞吐 15MB/s+
4. **业务层**：检测流程管理、故障诊断逻辑、检测报告生成
5. **UI 层**：Qt Widgets 实时图谱显示，30Hz 控频刷新

**我的职责（Task + Action）：**

作为**核心模块负责人/中级开发工程师**，主要负责四块：

**1. 模块化集成框架设计**
设计 IDetectionModule 统一接口规范，配合工厂注册机制和模块管理器。新检测技术只需实现接口并注册，框架自动处理连接、数据流转、UI 绑定。集成周期从 3 个月缩短到约 50 天。

**2. 数据管线重构**
用 SPSC 无锁队列 + 控频刷新 + shared_ptr 零拷贝重构数据管线。解决了上线初期 UI 卡顿的核心问题，延迟从 200ms 降到 50ms，CPU 降 40%。

**3. 红外模块快速集成**
2 周完成从 SDK 调研到功能上线。第一周研究 SDK + 跑通 Demo，第二周封装模块集成到框架。实现了状态机连接管理（处理 USB 热插拔）、伪彩图实时显示、温度标定与测温。

**4. 团队建设**
- 指导 2 名初级工程师：任务拆解→代码 Review→技术分享→文档沉淀
- 组织技术分享："C++ 性能优化"、"状态机设计模式"
- 建立代码 Review 机制和编码规范

**结果（Result）：**

| 成果指标 | 数据 |
|----------|------|
| UI 刷新延迟 | 200ms → 50ms |
| CPU 占用 | 降低 40% |
| 集成周期 | 3 个月 → 约 50 天 |
| 红外模块上线 | 2 周 |
| 现场故障率 | 月均 3 次 → 0.5 次 |
| 检测准确率 | > 92% |
| 数据处理吞吐 | 15MB/s |

## 延伸思考

### 项目最大的技术挑战

实时性要求高——多个模块同时采集，数据量大，又要在手持 ARM 设备上流畅运行。不像 PC 软件有充足的 CPU 和内存余量，嵌入式场景每个优化都很关键。

### 如果重新来过会怎么改

1. 更早引入模块化框架，不要等到第三个模块接入时才重构
2. 一开始就用无锁队列，不要先用 mutex 再换
3. 建立性能基线和自动化回归测试，每次提交自动跑性能 benchmark

### 项目中的协作

和硬件团队的协作很多——协议定义需要双方一起确认、现场联调需要软硬件同步。我学会了用"先写接口文档再编码"的方式减少沟通成本。

## 面试表达建议

**30 秒概貌：** "T95 是电力行业的带电检测手持终端，集成红外、UHF、TEV、AE 四种检测技术，12 人团队，500 多个现场用户。"

**1 分钟职责：** "我是核心模块负责人，主要做了三件事——设计模块化框架让集成周期从 3 个月缩短到 50 天；用无锁队列重构数据管线把 UI 延迟从 200ms 降到 50ms；2 周完成红外模块的快速集成。"

**收尾用数据：** "现场故障率从月均 3 次降到 0.5 次，检测准确率 92% 以上。"

**控制时间：** 整体不超过 2 分钟，留时间给面试官追问。面试官感兴趣的点他会追问，不用一次全讲。
