{
  "id": "cpp_012",
  "question": "多线程编程中如何保证线程安全？",
  "tags": [
    "多线程",
    "mutex",
    "线程安全",
    "RAII"
  ],
  "difficulty": 2,
  "hint": "分层回答：mutex→读写锁→原子操作→无锁设计",
  "answer": "**线程安全**的保护手段按从简单到高级分层：(1)互斥锁**mutex**：最基本的保护，lock_guard/**unique_lock** **RAII**封装防止忘记解锁；(2)**读写锁**shared_mutex：读多写少场景，多个读者可并发；(3)**原子操作****atomic**：对单个变量的无锁操作，比mutex轻量；(4)无锁数据结构：如**SPSC**队列，完全避免锁的开销。设计原则：最小化临界区、避免嵌套锁、优先用RAII管理锁、不共享则不需同步。",
  "source": "现代C++与多线程面试回答模板.md"
}