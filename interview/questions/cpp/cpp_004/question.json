{
  "id": "cpp_004",
  "question": "C++内存模型和原子操作是什么？memory_order有什么用？",
  "tags": ["多线程", "原子操作", "内存序", "C++11"],
  "difficulty": 3,
  "hint": "从CPU乱序执行→编译器/硬件重排→memory_order约束可见性和顺序的角度回答",
  "answer": "C++11内存模型定义了多线程程序中内存操作的可见性和顺序规则。编译器和CPU都会重排指令以优化性能，原子操作配合memory_order约束来控制这种重排。六种内存序：relaxed(无序，只保证原子性)、acquire(读屏障，之后的读写不会重排到此前)、release(写屏障，之前的读写不会重排到此后)、acq_rel(双向屏障)、seq_cst(全局顺序一致，默认最严格)、consume(已废弃)。典型的生产者-消费者模式用release写+acquire读，保证数据在标志位之前可见。",
  "source": "C++面试准备.md"
}