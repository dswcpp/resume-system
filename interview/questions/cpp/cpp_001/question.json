{
  "id": "cpp_001",
  "question": "虚函数的底层原理是什么？虚函数表和虚指针如何工作？",
  "tags": [
    "多态",
    "虚函数表",
    "OOP"
  ],
  "difficulty": 2,
  "hint": "从vptr/vtable机制、动态绑定流程、虚析构函数三个角度回答",
  "answer": "每个含虚函数的类会生成一张**虚函数表**(**vtable**)，存放该类所有虚函数的地址。对象内部有一个隐藏的**虚指针**(**vptr**)指向所属类的vtable。调用虚函数时，编译器生成间接调用代码：通过对象的vptr找到vtable，再按偏移取出函数指针调用。派生类重写虚函数时，其vtable中对应槽位替换为新函数地址，这就是运行时多态的实现。**虚析构函数**确保通过基类指针delete时能正确调用派生类析构。多重继承时对象内会有多个vptr，分别指向不同基类的vtable。",
  "source": "C++面试准备.md"
}