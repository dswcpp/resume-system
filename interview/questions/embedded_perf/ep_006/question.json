{
  "id": "ep_006",
  "question": "UI刷新频率控制（控频刷新）怎么实现？为什么不能每帧都刷新？",
  "tags": [
    "控频刷新",
    "UI性能",
    "帧率控制",
    "实时显示"
  ],
  "difficulty": 2,
  "hint": "从问题现象说起：每收到数据就刷新UI会怎样？",
  "answer": "**为什么不能每帧都刷：**\n- 数据采集频率远高于人眼感知（**1MHz**采集 vs **60fps**显示）\n- 每次刷新都要触发Qt的paint事件，开销大\n- UI线程被刷新任务淹没，导致卡顿、无法响应用户操作\n\n**控频策略：**\n1. **定时器驱动**：QTimer以固定间隔（如**33ms**≈**30fps**）触发刷新\n2. **最新数据快照**：刷新时只取最新数据，中间数据丢弃\n3. **脏标记**：数据更新时只设dirty=true，定时器触发时检查dirty再决定是否刷新\n\n**T95项目实现：**\n```\n采集线程（1MHz）→ SPSC队列 → 处理线程 → 写入共享缓冲\n                                          ↓\n                              QTimer(33ms) → 检查dirty\n                                          → 读取缓冲快照\n                                          → 更新UI控件\n```\n\n**效果：** UI延迟从**2**00ms**降至**50ms**，CPU占用降低**40%**，界面操作流畅不卡顿。",
  "source": "简历：控频30fps、UI延迟200ms→50ms、CPU占用降低40%"
}